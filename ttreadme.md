Overview

—ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç), –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

–°—Ç–µ–∫ –≤–∫–ª—é—á–∞–µ—Ç:

FastAPI ‚Äî –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π

PostgreSQL ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

SQLAlchemy + Alembic ‚Äî –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

Docker Compose ‚Äî —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Prometheus-FastAPI metrics ‚Äî –º–µ—Ç—Ä–∏–∫–∏ /metrics

httpx ‚Äî –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
–°–µ—Ä–≤–∏—Å	–ü–æ—Ä—Ç	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
energy_service	8001	–ú–æ–¥–µ–ª—å —ç–Ω–µ—Ä–≥–æ—Å–µ–∫—Ç–æ—Ä–∞ (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, —Å–±–æ–∏, —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
water_service	8002	–ú–æ–¥–µ–ª—å –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è (–¥–∞–≤–ª–µ–Ω–∏–µ, —Å–±–æ–∏, –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ)
transport_service	8003	–ú–æ–¥–µ–ª—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞ (–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —ç–Ω–µ—Ä–≥–∏–∏/–≤–æ–¥—ã)
risk_engine	8004	–†–∞—Å—á—ë—Ç —Ä–∏—Å–∫–æ–≤ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º + –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫
scenario_simulator	8005	–°–∏–º—É–ª—è—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π (–æ—Ç–∫–ª—é—á–µ–Ω–∏—è, –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏, Monte-Carlo)
reporting	8010	–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã, –∏—Å—Ç–æ—Ä–∏—è —Ä–∏—Å–∫–æ–≤, —Å–Ω–∞–ø—à–æ—Ç—ã
ingestor	‚Äî	–ü—Ä–∏—ë–º ¬´—Å—ã—Ä—ã—Ö¬ª —Å–æ–±—ã—Ç–∏–π
normalizer	‚Äî	–û—á–∏—Å—Ç–∫–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö ingestor

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–¥–µ—Ä–∂–∏—Ç:

main.py
config.py
database.py
models.py
schemas.py
routers/
utils/
alembic/
Dockerfile
requirements.txt

‚öôÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Health Checks

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

Health
GET /health

Readiness
GET /ready

Prometheus metrics
GET /metrics

üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Data Flow)

ingestor ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—ã—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è

normalizer ‚Üí –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏

risk_engine ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–∏—Å–∫–∏

scenario_simulator ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏, –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ–∫—Ç–æ—Ä–æ–≤

reporting ‚Üí –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –≤—Å—ë –∏ –≤—ã–¥–∞—ë—Ç —Å–≤–æ–¥–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

----------------------

–≠—Ç–æ—Ç —Å—Ç–µ–Ω–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É,

–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã,

—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏,

–ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ,

—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã —Ä–∏—Å–∫–∞,

–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É —Å–µ–∫—Ç–æ—Ä–æ–≤.
## –ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–≥–æ–Ω–æ–≤ (scenario_id, run_id)

- –ö–∞–∂–¥—ã–π –ø—Ä–æ–≥–æ–Ω —Å—Ü–µ–Ω–∞—Ä–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á —Å–æ—Å—Ç–æ—è–Ω–∏—è `(scenario_id, run_id)` –≤–æ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö.
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø—Ä–æ–≥–æ–Ω–æ–º (`run_scenario` –∏ Monte-Carlo) scenario_simulator –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º —Å `force=true`.
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–æ–≥–æ–Ω–∞–º–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å baseline –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º init.
